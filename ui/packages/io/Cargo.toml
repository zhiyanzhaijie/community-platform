[package]
name = "io"
version = "0.1.0"
edition = "2021"

[dependencies]
# Dioxus fullstack
dioxus = { workspace = true, features = ["fullstack"] }
serde = { version = "1.0", features = ["derive"] }

# Core 依赖：使用 optional 标记，只在服务端编译
app = { path = "../../../core/crates/app", optional = true }
domain = { path = "../../../core/crates/domain", optional = true }
infra = { path = "../../../core/crates/infra", optional = true }
shared = { path = "../../../core/crates/shared", optional = true }
# 直接使用 core/api 的 DTO，不启用 openapi feature
core-api = { package = "api", path = "../../../core/crates/api", optional = true, default-features = false }

# 服务端专用依赖
tokio = { version = "1.0", optional = true }
anyhow = { version = "1.0", optional = true }
uuid = { version = "1.10", optional = true }
chrono = { version = "0.4", optional = true }
jsonwebtoken = { version = "9.3", optional = true }

[features]
default = []
# server feature 启用时，才编译 Core 依赖
server = [
    "dep:app", 
    "dep:domain", 
    "dep:infra", 
    "dep:shared",
    "dep:core-api",
    "dep:tokio",
    "dep:anyhow",
    "dep:uuid",
    "dep:chrono",
    "dep:jsonwebtoken",
    "dioxus/server"
]
